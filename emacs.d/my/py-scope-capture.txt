import sys
import traceback
import types


def sc_spy(*values):
    try:
        raise Exception
    except Exception:
        tb = traceback.format_stack()
    where = tb[-2]
    sc._contexts.append(values)
    print("SPY {}{}".format(sc._n, where))
    sc._n += 1


def sc_get_ctx(n):
    return sc._contexts[n]


sc = types.ModuleType("sc")
sc._n = 0
sc._contexts = []
sc.spy = sc_spy
sc.get_ctx = sc_get_ctx
sys.modules["sc"] = sc
